"use strict";function pixangularCell(r){function n(n,o,a){function e(){n.safeApply(function(){n.ngModel[n.row][n.column]=n.forecolor}),o.css("background-color",n.forecolor)}function t(){n.ngModel[n.row][n.column]=n.backcolor,o.css("background-color",n.backcolor)}function i(){n.safeApply(function(){n.forecolor=n.ngModel[n.row][n.column]})}function u(){n.safeApply(function(){n.backcolor=n.ngModel[n.row][n.column]})}var c=r(a.ngRightClick);o.css("background-color",n.ngModel[n.row][n.column]),o.bind("contextmenu",function(r){n.$apply(function(){r.preventDefault(),c(n,{$event:r}),r.ctrlKey?u():t()})}),o.on("click",function(r){r.ctrlKey?i():e()}),o.on("mouseenter",function(r){switch(r.buttons){case l.left:e();break;case l.right:t()}}),n.safeApply=function(r){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?r&&"function"==typeof r&&r():this.$apply(r)}}var o={restrict:"EA",link:n,scope:{ngModel:"=",row:"=",column:"=",forecolor:"=",backcolor:"=",showgrid:"="}},l={left:1,right:2};return o}function pixangular(){function r(r,n,o){n.addClass("pixangular"),"undefined"!=typeof o.editor&&n.addClass("editing")}var n={restrict:"EA",link:r,scope:{grid:"=",width:"@",height:"@"},controller:pixangularController,controllerAs:"vm",bindToController:!0,templateUrl:"dist/assets/views/pixangular.html"};return n}function pixangularController(){function r(r){return o.dragging?o.currentColor:r}function n(){o.output=o.grid}var o=this;o.forecolor="#000000",o.backcolor="#FFFFFF",o.colorIn=r,o.dragging=!1,o.showGrid=!0,o.output=o.grid,o.generateOutput=n}function pixangularGenerator(){function r(r,n,o){for(var l=[],a=0;r>a;a++){for(var e=[],t=0;n>t;t++)e.push(o);l.push(e)}return l}var n={generateGrid:r};return n}angular.module("pixangular",[]),angular.module("pixangular").directive("pixangularCell",pixangularCell),pixangularCell.$inject=["$parse"],angular.module("pixangular").directive("pixangular",pixangular),angular.module("pixangular").factory("pixangularGenerator",pixangularGenerator);